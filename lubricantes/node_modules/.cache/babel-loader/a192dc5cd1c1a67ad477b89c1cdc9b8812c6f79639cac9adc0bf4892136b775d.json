{"ast":null,"code":"import axios from 'axios';\nimport { confirmar } from '../../funciones';\nimport Search from '@/components/Search.vue';\nimport FilterGroup from '@/components/FilterGroup.vue';\nimport FilterItem from '@/components/FilterItem.vue';\nexport default {\n  data() {\n    return {\n      usuario: null,\n      toSearch: \"\",\n      toFilter: \"\",\n      roles: []\n    };\n  },\n  mounted() {\n    this.getUsuario();\n  },\n  methods: {\n    onFilterFx(field, event) {\n      if (event === '') {\n        this.toFilter = '';\n      } else {\n        this.toFilter = '&' + field + '=' + event;\n      }\n      this.getUsuario();\n    },\n    getRoles() {\n      this.axios({\n        method: 'get',\n        url: 'http://localhost:3000/roles'\n      }).then(response => {\n        this.roles = response.data;\n        setTimeout(function () {\n          var elems = document.querySelectorAll('select');\n          var select = M.FormSelect.init(elems);\n        });\n        // console.log(response);\n      });\n    },\n\n    getUsuario() {\n      axios.get('http://localhost:3000/usuarios?_expand=roles' + this.toSearch + this.toFilter).then(response => this.usuario = response.data);\n    },\n    eliminar(id, nombres) {\n      confirmar(id, nombres, 'http://localhost:3000/usuarios/', 3);\n    },\n    searchFx(event) {\n      if (event === \"\") {\n        this.toSearch = '';\n      } else {\n        this.toSearch = '&q=' + event;\n      }\n      this.getUsuario();\n    }\n  },\n  components: {\n    Search,\n    FilterGroup,\n    FilterItem\n  },\n  mounted() {\n    this.getUsuario();\n    this.getRoles();\n  },\n  created() {\n    setTimeout(() => {\n      var elems = document.querySelectorAll('select');\n      var select = M.FormSelect.init(elems);\n    });\n  }\n};","map":{"version":3,"names":["axios","confirmar","Search","FilterGroup","FilterItem","data","usuario","toSearch","toFilter","roles","mounted","getUsuario","methods","onFilterFx","field","event","getRoles","method","url","then","response","setTimeout","elems","document","querySelectorAll","select","M","FormSelect","init","get","eliminar","id","nombres","searchFx","components","created"],"sources":["/home/xavi/Documentos/Dilpmado Full/mod 6 Desarrollo Frontend con VueJS/final/lubricantes/src/views/usuario/HomeUsuario.vue"],"sourcesContent":["<template v-slot:lista>\n\n    <div class=\"row\">\n        <search placeholder=\"Buscar usuario\" @searchtext=\"searchFx($event)\"></search>\n<filter-group>\n    <filter-item :items=\"roles\" label=\"Rol\" @onfilter=\"onFilterFx('rolesId', $event)\"></filter-item>\n</filter-group>\n        <div class=\"col-lg-8 offset-lg-2\">\n            <div class=\"table-responsive\">\n                <table class=\"table table-bordered table-hover\">\n                    <!-- <search placeholder=\"Buscar cliente\" @searchtext=\"searchFx($event)\"></search>\n                <filter-group>\n                    <filter-item :items=\"states\" label=\"Departamento\"\n                        @onfilter=\"onFilterFx('statesId', $event)\"></filter-item>\n                </filter-group> -->\n\n                    <thead><tr><th>#</th><th>NOMBRES</th><th>   APELLIDOS</th><th>CI O NIT</th><th>MOVILIDAD</th><th>MARCA</th><th>MOTOR</th><th>ROL</th><th>ACCIONES</th></tr></thead>\n                        <tbody class=\"table-group-divider\" id=\"contenido\">\n                            <tr v-for=\"usua, i in usuario\" :key=\"usua.id\">\n                            <td>{{ (i + 1) }}</td>\n                            <td>{{ usua.nombres }}</td>\n                            <td>{{ usua.apellidos }}</td>\n                            <td>{{ usua.cionit }}</td>\n                            <td>{{ usua.movilidad }}</td>\n                            <td>{{ usua.marca }}</td>\n                            <td>{{ usua.motor }}</td>\n                            <td>{{ usua.roles.rol }}</td>\n                            <td>\n                                <router-link :to=\"{path:'editarusuario/'+usua.id}\" class=\"btn btn-warning\">\n                                    <i class=\"fa-solid fa-edit\"></i>\n                                </router-link> &nbsp;\n                                <button class=\"btn btn-danger\" v-on:click=\"eliminar(usua.id,usua.nombres)\">\n                                    <i class=\"fa-solid fa-trash\"></i>\n                                </button>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\n    import axios from 'axios';\n    import { confirmar } from '../../funciones'\n    import Search from '@/components/Search.vue'\n    import FilterGroup from '@/components/FilterGroup.vue';\n    import FilterItem from '@/components/FilterItem.vue';\n    export default{\n        data(){\n            return{ usuario:null,\n                    toSearch: \"\",\n                    toFilter: \"\",\n                    roles: []\n                }\n        },\n        mounted(){\n            this.getUsuario();\n        },\n        methods: {\n            onFilterFx(field, event) {\n            if (event === '') {\n                this.toFilter = '';\n            } else {\n                this.toFilter = '&' + field + '=' + event;\n            }\n            this.getUsuario();\n            },\n            getRoles(){\n                this.axios({\n                method: 'get',\n                url: 'http://localhost:3000/roles'\n                })\n                .then((response) => {\n                    this.roles = response.data;\n                    setTimeout(function () {\n                        var elems = document.querySelectorAll('select');\n                        var select = M.FormSelect.init(elems);\n                    });\n                    // console.log(response);\n                });\n            },\n            getUsuario(){\n                axios.get('http://localhost:3000/usuarios?_expand=roles'+this.toSearch+this.toFilter).then(\n                    response => (\n                        this.usuario = response.data\n                    )\n                );\n            },\n            eliminar(id,nombres){\n                confirmar(id,nombres,'http://localhost:3000/usuarios/',3);\n            },\n            searchFx(event){\n            if (event === \"\") {\n                this.toSearch = '';\n            } else {\n                this.toSearch = '&q=' + event;\n            }\n            this.getUsuario();\n            }\n        },\n        components: {\n        Search,FilterGroup,FilterItem\n    },\n    mounted() {\n        this.getUsuario();\n        this.getRoles();\n    },\n    created() {\n        setTimeout(() => {\n            var elems = document.querySelectorAll('select');\n            var select = M.FormSelect.init(elems);\n        });\n    }\n    }\n</script>"],"mappings":"AA2CI,OAAOA,KAAI,MAAO,OAAO;AACzB,SAASC,SAAQ,QAAS,iBAAgB;AAC1C,OAAOC,MAAK,MAAO,yBAAwB;AAC3C,OAAOC,WAAU,MAAO,8BAA8B;AACtD,OAAOC,UAAS,MAAO,6BAA6B;AACpD,eAAc;EACVC,IAAIA,CAAA,EAAE;IACF,OAAM;MAAEC,OAAO,EAAC,IAAI;MACZC,QAAQ,EAAE,EAAE;MACZC,QAAQ,EAAE,EAAE;MACZC,KAAK,EAAE;IACX;EACR,CAAC;EACDC,OAAOA,CAAA,EAAE;IACL,IAAI,CAACC,UAAU,CAAC,CAAC;EACrB,CAAC;EACDC,OAAO,EAAE;IACLC,UAAUA,CAACC,KAAK,EAAEC,KAAK,EAAE;MACzB,IAAIA,KAAI,KAAM,EAAE,EAAE;QACd,IAAI,CAACP,QAAO,GAAI,EAAE;MACtB,OAAO;QACH,IAAI,CAACA,QAAO,GAAI,GAAE,GAAIM,KAAI,GAAI,GAAE,GAAIC,KAAK;MAC7C;MACA,IAAI,CAACJ,UAAU,CAAC,CAAC;IACjB,CAAC;IACDK,QAAQA,CAAA,EAAE;MACN,IAAI,CAAChB,KAAK,CAAC;QACXiB,MAAM,EAAE,KAAK;QACbC,GAAG,EAAE;MACL,CAAC,EACAC,IAAI,CAAEC,QAAQ,IAAK;QAChB,IAAI,CAACX,KAAI,GAAIW,QAAQ,CAACf,IAAI;QAC1BgB,UAAU,CAAC,YAAY;UACnB,IAAIC,KAAI,GAAIC,QAAQ,CAACC,gBAAgB,CAAC,QAAQ,CAAC;UAC/C,IAAIC,MAAK,GAAIC,CAAC,CAACC,UAAU,CAACC,IAAI,CAACN,KAAK,CAAC;QACzC,CAAC,CAAC;QACF;MACJ,CAAC,CAAC;IACN,CAAC;;IACDX,UAAUA,CAAA,EAAE;MACRX,KAAK,CAAC6B,GAAG,CAAC,8CAA8C,GAAC,IAAI,CAACtB,QAAQ,GAAC,IAAI,CAACC,QAAQ,CAAC,CAACW,IAAI,CACtFC,QAAO,IACH,IAAI,CAACd,OAAM,GAAIc,QAAQ,CAACf,IAEhC,CAAC;IACL,CAAC;IACDyB,QAAQA,CAACC,EAAE,EAACC,OAAO,EAAC;MAChB/B,SAAS,CAAC8B,EAAE,EAACC,OAAO,EAAC,iCAAiC,EAAC,CAAC,CAAC;IAC7D,CAAC;IACDC,QAAQA,CAAClB,KAAK,EAAC;MACf,IAAIA,KAAI,KAAM,EAAE,EAAE;QACd,IAAI,CAACR,QAAO,GAAI,EAAE;MACtB,OAAO;QACH,IAAI,CAACA,QAAO,GAAI,KAAI,GAAIQ,KAAK;MACjC;MACA,IAAI,CAACJ,UAAU,CAAC,CAAC;IACjB;EACJ,CAAC;EACDuB,UAAU,EAAE;IACZhC,MAAM;IAACC,WAAW;IAACC;EACvB,CAAC;EACDM,OAAOA,CAAA,EAAG;IACN,IAAI,CAACC,UAAU,CAAC,CAAC;IACjB,IAAI,CAACK,QAAQ,CAAC,CAAC;EACnB,CAAC;EACDmB,OAAOA,CAAA,EAAG;IACNd,UAAU,CAAC,MAAM;MACb,IAAIC,KAAI,GAAIC,QAAQ,CAACC,gBAAgB,CAAC,QAAQ,CAAC;MAC/C,IAAIC,MAAK,GAAIC,CAAC,CAACC,UAAU,CAACC,IAAI,CAACN,KAAK,CAAC;IACzC,CAAC,CAAC;EACN;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}